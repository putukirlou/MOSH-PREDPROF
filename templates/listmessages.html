{% extends "base.html" %}
{% block content %}
<!DOCTYPE html>

<html>
  <head>
    <title>Список сообщений</title>
    <meta charset="utf-8">
  </head>
  <body>

    <table id="myTable">
        <thead>
        <th>ID</th>
        <th>DEVICE_ID</th>
        <th>Timestamp</th>
        <th>Status</th>
        </thead>
      </tr>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th, td {
        padding: 10px;
        text-align: left;
        border: 1px solid #ddd;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
      {% for item in args['messages'] %}
      <tr>
        <td>{{ item["id"] }}</td>
        <td>{{ item["device_id"] }}</td>
        <td>{{ item["timestamp"] }}</td>
        <td>
          {% if item["status"].lower() in ["все цифры", "пустые", "все карты в порядке", "все системы работают", "карты не распознаны", "карта повреждена", "клавиатура работает", "купюра повреждена", "неверные данные", "работает", "успешно", "хорошее", "энергосбережение впорядке", "принтер работает", "обновление отсутствует", "ошибок не найдено", "полный", "не удалось(транзакция)", "некоторые карты повреждены", "открыто"] %}
            Работает
          {% elif item["status"].lower() in ["купюра зажевана", "клавиатура не работает", "найдены ошибки", "не работает", "нет бумаги", "нет свободного места", "нет соединения", "нуждается в замене", "ошибка механизма", "обновление доступно", "ошибка питания", "ошибка связи", "ошибка сети", "ошибка совместимости", "ошибка чтения", "плохое", "потеря соединения", "принтер не работает", "проблема с сетью", "проблемы с энергоснабжением", "профилактическое", "слабый сигнал", "техническая ошибка", "техическая", "нет свободного места", "пустой", "потеря пакетов"] %}
            Механик
          {% elif item["status"].lower() in ["купюра отсутствует", "нет наличных", "низкий уровень наличных"] %}
            Инкассация
          {% elif item["status"].lower() in ["настройки сброшены", "устройство отключено", "не удалось( по)", "некоторые системы не работают", "закрыто"] %}
            В ремонте
          {% else %}
            Неизвестный статус
          {% endif %}
        </td>
      </tr>
      {% endfor %}

    </table>

  </body>
</html>

{% endblock %}
